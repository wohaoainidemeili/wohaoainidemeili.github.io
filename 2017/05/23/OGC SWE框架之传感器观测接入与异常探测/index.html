<!doctype html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="OGC SWE全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。 建模标准  建模标准有传感器建模语言SenorML(Sensor Model Language), 传感器观测与测量建模语言O&amp;amp;M(Observation and Measurement), 传感器常用数据模型编码标准SWECommon(SWE Common">
<meta property="og:type" content="article">
<meta property="og:title" content="OGC SWE传感器网络服务之异构传感器观测数据接入与异常探测">
<meta property="og:url" content="http://yoursite.com/2017/05/23/OGC SWE框架之传感器观测接入与异常探测/index.html">
<meta property="og:site_name" content="梦之墨色">
<meta property="og:description" content="OGC SWE全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。 建模标准  建模标准有传感器建模语言SenorML(Sensor Model Language), 传感器观测与测量建模语言O&amp;amp;M(Observation and Measurement), 传感器常用数据模型编码标准SWECommon(SWE Common">
<meta property="og:image" content="http://oqteqog7k.bkt.clouddn.com/data_model.jpg">
<meta property="og:image" content="http://oqteqog7k.bkt.clouddn.com/SES%E8%BD%AC%E6%8D%A2%E5%9B%BE.jpg">
<meta property="og:image" content="http://oqteqog7k.bkt.clouddn.com/%E6%95%B4%E4%B8%AA%E5%8E%9F%E7%90%86.png">
<meta property="og:image" content="http://oqteqog7k.bkt.clouddn.com/SOS-SES-Feeder%E5%8E%9F%E7%90%86%E5%9B%BE.png">
<meta property="og:updated_time" content="2017-06-01T14:53:06.528Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OGC SWE传感器网络服务之异构传感器观测数据接入与异常探测">
<meta name="twitter:description" content="OGC SWE全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。 建模标准  建模标准有传感器建模语言SenorML(Sensor Model Language), 传感器观测与测量建模语言O&amp;amp;M(Observation and Measurement), 传感器常用数据模型编码标准SWECommon(SWE Common">
<meta name="twitter:image" content="http://oqteqog7k.bkt.clouddn.com/data_model.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/05/23/OGC SWE框架之传感器观测接入与异常探测/"/>





  <title>OGC SWE传感器网络服务之异构传感器观测数据接入与异常探测 | 梦之墨色</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">梦之墨色</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/23/OGC SWE框架之传感器观测接入与异常探测/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuan Sai">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梦之墨色">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">OGC SWE传感器网络服务之异构传感器观测数据接入与异常探测</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-23T12:24:16+08:00">
                2017-05-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="OGC-SWE全称-Sensor-Web-Enablement-是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。"><a href="#OGC-SWE全称-Sensor-Web-Enablement-是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。" class="headerlink" title="OGC SWE全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。"></a><a href="http://www.opengeospatial.org/ogc/markets-technologies/swe/" target="_blank" rel="external">OGC SWE</a>全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。</h2><ul>
<li><p>建模标准</p>
<ul>
<li>建模标准有传感器建模语言<a href="http://www.opengeospatial.org/standards/sensorML/" target="_blank" rel="external">SenorML</a>(Sensor Model Language),</li>
<li>传感器观测与测量建模语言<a href="http://www.opengeospatial.org/standards/om" target="_blank" rel="external">O&amp;M</a>(Observation and Measurement),</li>
<li>传感器常用数据模型编码标准<a href="http://www.opengeospatial.org/standards/swecommon" target="_blank" rel="external">SWECommon</a>(SWE Common Data Model Encoding Standard)</li>
<li>事件建模语言<a href="http://portal.opengeospatial.org/files/?artifact_id=29566" target="_blank" rel="external">EML</a>(Event Pattern Markup Language,该建模语言尚处于discussion paper状态)</li>
</ul>
</li>
<li><p>服务标准</p>
<ul>
<li>传感器观测服务<a href="http://www.opengeospatial.org/standards/sos" target="_blank" rel="external">SOS</a>(Sensor Observation Service)</li>
<li>传感器异常探测服务<a href="http://portal.opengeospatial.org/files/?artifact_id=29576" target="_blank" rel="external">SES</a>(Sensor Event Service)</li>
<li>传感器处理服务<a href="http://portal.opengeospatial.org/files/?artifact_id=32766" target="_blank" rel="external">WPS</a>(Web Processing Service)</li>
<li>传感器规划服务<a href="http://www.opengeospatial.org/standards/sps" target="_blank" rel="external">SPS</a>(Sensor Planning Service)</li>
</ul>
</li>
</ul>
<hr>
<h2 id="由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理"><a href="#由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理" class="headerlink" title="由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理"></a>由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理</h2><h1 id="1-传感器观测数据接入服务-SOS"><a href="#1-传感器观测数据接入服务-SOS" class="headerlink" title="1    传感器观测数据接入服务(SOS)"></a>1    传感器观测数据接入服务(SOS)</h1><p>传感器数据观测接入服务实习并非由单纯的由SOS标准实现，其包含了Sensor Model Language、O&amp;M、SWECommon与Sensor Observation Service四个SWE标准，其中前三者主要是用于实现传感器建模与传感器观测数据建模，Sensor Observation Service服务标准用于提供传感器观测服务请求标准，如GetCapabilities,RegisterSensor,DescribeSensor,InserObservation,GetObservation等服务。</p>
<p>现实中的传感器是以平台为基础的，平台被称之为站点，站点下搭载着各种传感器。比如我们的手机上搭载着光线传感器、距离传感器、压力传感器、GPS等各种传感器，每一种传感器负责一个对应的观测属性。</p>
<h2 id="1-1-传感器建模"><a href="#1-1-传感器建模" class="headerlink" title="1.1        传感器建模"></a>1.1        传感器建模</h2><p>传感器建模语言就是针对传感器或传感器站点进行建模，将传感器实体数字化，从而实现其计算机存储的过程。下方给出一个站点的SensorML,该站点名称为<code>urn:liesmars:object:feature:Platform:Station:Weather:sta-a001</code>被SensorML下的<code>&lt;sml:identifier&gt;</code>标签唯一标识，因为一个传感器是唯一的，所以传感器的站点名称必须是唯一的；其次，传感器包含·<outputs>·部分，该部分主要是用于表明传感器的观测属性，本示例中的传感器站点sta-a001,可以观测AirTemperature、WindSpeed和WindDirection三个对象，其中<code>&lt;swe:Quantity&gt;</code>标签指定了这三个观测属性的观测值是decimal类型，是一种浮点型数据，观测属性内容由SWECommon标准支持。此外，SensorML下还可以声明position属性，用于声明该传感器的位置，不过这一内容主要用于描述原位传感器(位置不变的传感器)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">&lt;sml:SensorML version=&quot;1.0.1&quot;&gt;</div><div class="line">&lt;sml:member&gt;</div><div class="line">	&lt;sml:System xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</div><div class="line">		&lt;sml:identification&gt;</div><div class="line">			&lt;sml:IdentifierList&gt;</div><div class="line">				&lt;sml:identifier&gt;</div><div class="line">					&lt;sml:Term definition=&quot;urn:ogc:def:identifier:OGC:uniqueID&quot;&gt;</div><div class="line">						&lt;sml:value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/sml:value&gt;</div><div class="line">					&lt;/sml:Term&gt;</div><div class="line">				&lt;/sml:identifier&gt;</div><div class="line">			&lt;/sml:IdentifierList&gt;</div><div class="line">		&lt;/sml:identification&gt;</div><div class="line">		&lt;sml:outputs&gt;</div><div class="line">			&lt;sml:OutputList&gt;</div><div class="line">				&lt;sml:output name=&quot;AirTemperature&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:AirTemperature&quot;&gt;</div><div class="line">						&lt;gml:metaDataProperty&gt;</div><div class="line">							&lt;offering&gt;</div><div class="line">								&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">								&lt;name&gt;测绘遥感信息工程国家重点实验(武汉大学)&lt;/name&gt;</div><div class="line">							&lt;/offering&gt;</div><div class="line">						&lt;/gml:metaDataProperty&gt;</div><div class="line">						&lt;swe:uom code=&quot;Cel&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/sml:output&gt;</div><div class="line">				&lt;sml:output name=&quot;WindSpeed&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindSpeed&quot;&gt;</div><div class="line">						&lt;gml:metaDataProperty&gt;</div><div class="line">							&lt;offering&gt;</div><div class="line">								&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">								&lt;name&gt;测绘遥感信息工程国家重点实验(武汉大学)&lt;/name&gt;</div><div class="line">							&lt;/offering&gt;</div><div class="line">						&lt;/gml:metaDataProperty&gt;</div><div class="line">						&lt;swe:uom code=&quot;m/s&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/sml:output&gt;</div><div class="line">				&lt;sml:output name=&quot;WindDirection&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindDirection&quot;&gt;</div><div class="line">						&lt;gml:metaDataProperty&gt;</div><div class="line">							&lt;offering&gt;</div><div class="line">								&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">								&lt;name&gt;测绘遥感信息工程国家重点实验武汉大学)&lt;/name&gt;</div><div class="line">							&lt;/offering&gt;</div><div class="line">						&lt;/gml:metaDataProperty&gt;</div><div class="line">						&lt;swe:uom code=&quot;degree&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/sml:output&gt;</div><div class="line">			&lt;/sml:OutputList&gt;</div><div class="line">			&lt;/sml:outputs&gt;</div><div class="line">		&lt;/sml:System&gt;</div><div class="line">	&lt;/sml:member&gt;</div><div class="line">&lt;/sml:SensorML&gt;</div></pre></td></tr></table></figure></outputs></p>
<h2 id="1-2-传感器观测数据建模"><a href="#1-2-传感器观测数据建模" class="headerlink" title="1.2        传感器观测数据建模"></a>1.2        传感器观测数据建模</h2><p>说完了传感器建模内容，那传感器的观测值，如何存储呢？传感器观测值，使用O&amp;M标准，将观测值编码，如下所示sta-001站点的一个观测值可以表示为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">&lt;om:Observation&gt;</div><div class="line">&lt;om:samplingTime&gt;</div><div class="line">	&lt;gml:TimeInstant&gt;</div><div class="line">		&lt;gml:timePosition&gt;2011-01-01T00:00:00.000+08:00&lt;/gml:timePosition&gt;</div><div class="line">	&lt;/gml:TimeInstant&gt;</div><div class="line">&lt;/om:samplingTime&gt;</div><div class="line">&lt;om:procedure xlink:href=&quot;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&quot;/&gt;</div><div class="line">&lt;om:observedProperty&gt;</div><div class="line">	&lt;swe:CompositePhenomenon gml:id=&quot;cpid0&quot; dimension=&quot;1&quot;&gt;</div><div class="line">		&lt;gml:name&gt;resultComponents&lt;/gml:name&gt;</div><div class="line">		&lt;swe:component xlink:href=&quot;http://www.opengis.net/def/uom/ISO-8601/0/Gregorian&quot;/&gt;</div><div class="line">		&lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:AirTemperature&quot;/&gt;</div><div class="line">		&lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindSpeed&quot;/&gt;</div><div class="line">		&lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindDirection&quot;/&gt;</div><div class="line">	&lt;/swe:CompositePhenomenon&gt;</div><div class="line">&lt;/om:observedProperty&gt;</div><div class="line">&lt;om:featureOfInterest&gt;</div><div class="line">	&lt;sa:SamplingPoint gml:id=&quot;sta-a001&quot;&gt;</div><div class="line">		&lt;gml:name&gt;station a001&lt;/gml:name&gt;</div><div class="line">		&lt;sa:sampledFeature xlink:href=&quot;&quot;/&gt;</div><div class="line">		&lt;sa:position&gt;</div><div class="line">			&lt;gml:Point srsName=&quot;urn:ogc:def:crs:EPSG::4326&quot;&gt;</div><div class="line">				&lt;gml:pos&gt;30.535296 114.369321&lt;/gml:pos&gt;</div><div class="line">			&lt;/gml:Point&gt;</div><div class="line">		&lt;/sa:position&gt;</div><div class="line">	&lt;/sa:SamplingPoint&gt;</div><div class="line">&lt;/om:featureOfInterest&gt;</div><div class="line">&lt;om:result&gt;</div><div class="line">	&lt;swe:DataArray&gt;</div><div class="line">		&lt;swe:elementCount&gt;</div><div class="line">			&lt;swe:Count&gt;</div><div class="line">				&lt;swe:value&gt;1&lt;/swe:value&gt;</div><div class="line">			&lt;/swe:Count&gt;</div><div class="line">		&lt;/swe:elementCount&gt;</div><div class="line">		&lt;swe:elementType name=&quot;Components&quot;&gt;</div><div class="line">			&lt;swe:DataRecord&gt;</div><div class="line">				&lt;swe:field name=&quot;Time&quot;&gt;</div><div class="line">					&lt;swe:Time definition=&quot;http://www.opengis.net/def/uom/ISO-8601/0/Gregorian&quot;/&gt;</div><div class="line">				&lt;/swe:field&gt;</div><div class="line">				&lt;swe:field name=&quot;AirTemperature&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:AirTemperature&quot;&gt;</div><div class="line">						&lt;swe:uom code=&quot;Cel&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/swe:field&gt;</div><div class="line">				&lt;swe:field name=&quot;WindSpeed&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindSpeed&quot;&gt;</div><div class="line">						&lt;swe:uom code=&quot;m/s&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/swe:field&gt;</div><div class="line">				&lt;swe:field name=&quot;WindDirection&quot;&gt;</div><div class="line">					&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindDirection&quot;&gt;</div><div class="line">						&lt;swe:uom code=&quot;degree&quot;/&gt;</div><div class="line">					&lt;/swe:Quantity&gt;</div><div class="line">				&lt;/swe:field&gt;</div><div class="line">			&lt;/swe:DataRecord&gt;</div><div class="line">		&lt;/swe:elementType&gt;</div><div class="line">		&lt;swe:encoding&gt;</div><div class="line">			&lt;swe:TextBlock decimalSeparator=&quot;.&quot; tokenSeparator=&quot;,&quot; blockSeparator=&quot;;&quot;/&gt;</div><div class="line">		&lt;/swe:encoding&gt;</div><div class="line">		&lt;swe:values&gt;</div><div class="line">		2011-01-01T00:00:00.000+08:00,-0.6,11.8,226;</div><div class="line">		&lt;/swe:values&gt;</div><div class="line">	&lt;/swe:DataArray&gt;</div><div class="line">&lt;/om:result&gt;</div><div class="line">&lt;/om:Observation&gt;</div></pre></td></tr></table></figure></p>
<p>上述O&amp;M编码主要声明了三部分内容：1）传感器观测时间，这是传感器观测的唯一标识，原则上不能重复，即同一个传感器在一个时刻只能有一组观测属性，其由<code>&lt;om:samplingTime&gt;</code>标签声明，内部由gml时间模块标识。2）感兴趣区域，这是传感器观测位置，因为OGC制定的是空间服务标准，它要求每一个观测属性都需要声明其观测时的空间位置，该空间位置可以为点或面，这部分由<code>&lt;om:featureOfInterest&gt;</code>标签标识，内部空间位置由samping和gml语言实现标识。3）数据区域，即<code>&lt;om:result&gt;</code>部分，该部分在<code>&lt;swe:values&gt;</code>标签内声明具体的数据内容，如上述的2011-01-01T00:00:00.000+08:00,-0.6,11.8,226;分别对应Time，AirTemperature，WindSpeed，WindDirection属性，同时，<code>&lt;swe:encoding&gt;</code>中声明了数据的分隔符，<code>decimalSeparator=&quot;.&quot;</code>表示decimal类型数据小数点为.符号，<code>tokenSeparator=&quot;,&quot;</code>表示数据间使用逗号分开，<code>blockSeparator=&quot;;&quot;</code>记录条之间使用分号分开。此处需要注意，当观测属性中存在空间位置时（移动的GPS传感器）空间数据会使用WKT格式编码，如点数据<code>POINT(30,120)#4326</code>表示在WGS84坐标系下的北纬30度，东经120度，此时不可以使用逗号作为数据间分隔符，需要更换。</p>
<h2 id="1-3-传感器观测服务"><a href="#1-3-传感器观测服务" class="headerlink" title="1.3        传感器观测服务"></a>1.3        传感器观测服务</h2><p>源码地址使用52North发布的SOS开源版本：<a href="http://52north.org/downloads/category/3-sos" target="_blank" rel="external">http://52north.org/downloads/category/3-sos</a><br>传感器观测服务基于上述的两种建模编码，实现GetCapabilities,RegisterSensor,DescribeSensor,InserObservation,GetObservation等服务，其实现原理是使用Soap协议将前端编码文件通过HTTP协议传给后台服务器，经过解码将对应的数据存储在数据库中。</p>
<p>这边给出RegisterSensor请求的XML编码，其是将SensorML编码嵌套在SOS编码中，具体如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;RegisterSensor service=&quot;SOS&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://www.opengis.net/sos/1.0&quot; xmlns:swe=&quot;http://www.opengis.net/swe/1.0.1&quot; xmlns:ows=&quot;http://www.opengeospatial.net/ows&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot; xmlns:ogc=&quot;http://www.opengis.net/ogc&quot; xmlns:om=&quot;http://www.opengis.net/om/1.0&quot; xmlns:sml=&quot;http://www.opengis.net/sensorML/1.0.1&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.opengis.net/sos/1.0</div><div class="line">http://schemas.opengis.net/sos/1.0.0/sosRegisterSensor.xsd http://www.opengis.net/om/1.0 http://schemas.opengis.net/om/1.0.0/extensions/observationSpecialization_override.xsd&quot;&gt;</div><div class="line">	&lt;SensorDescription&gt;</div><div class="line">		&lt;sml:SensorML version=&quot;1.0.1&quot;&gt;</div><div class="line">			&lt;sml:member&gt;</div><div class="line">				&lt;sml:System xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</div><div class="line">					&lt;sml:identification&gt;</div><div class="line">						&lt;sml:IdentifierList&gt;</div><div class="line">							&lt;sml:identifier&gt;</div><div class="line">								&lt;sml:Term definition=&quot;urn:ogc:def:identifier:OGC:uniqueID&quot;&gt;</div><div class="line">									&lt;sml:value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/sml:value&gt;</div><div class="line">								&lt;/sml:Term&gt;</div><div class="line">							&lt;/sml:identifier&gt;</div><div class="line">						&lt;/sml:IdentifierList&gt;</div><div class="line">					&lt;/sml:identification&gt;</div><div class="line">					&lt;sml:outputs&gt;</div><div class="line">						&lt;sml:OutputList&gt;</div><div class="line">							&lt;sml:output name=&quot;AirTemperature&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:AirTemperature&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;Cel&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;</div><div class="line">							&lt;sml:output name=&quot;WindSpeed&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindSpeed&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;m/s&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;</div><div class="line">							&lt;sml:output name=&quot;WindDirection&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:WindDirection&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;degree&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;</div><div class="line">						&lt;/sml:OutputList&gt;</div><div class="line">					&lt;/sml:outputs&gt;</div><div class="line">				&lt;/sml:System&gt;</div><div class="line">			&lt;/sml:member&gt;</div><div class="line">		&lt;/sml:SensorML&gt;</div><div class="line">	&lt;/SensorDescription&gt;</div><div class="line">	&lt;ObservationTemplate&gt;</div><div class="line">		&lt;om:Observation&gt;</div><div class="line">			&lt;om:samplingTime/&gt;</div><div class="line">			&lt;om:procedure/&gt;</div><div class="line">			&lt;om:observedProperty/&gt;</div><div class="line">			&lt;om:featureOfInterest/&gt;</div><div class="line">			&lt;om:result/&gt;</div><div class="line">		&lt;/om:Observation&gt;</div><div class="line">	&lt;/ObservationTemplate&gt;</div><div class="line">&lt;/RegisterSensor&gt;</div></pre></td></tr></table></figure></p>
<p>经后台解析会存储传感器的ID,观测属性ID等信息，并以SOS编码返回请求信息，如果注册成功会返回注册传感器的ID,否则会给出传感器已经存在的错误信息。</p>
<p>传感器观测服务的数据模型是其存储的关键，其结构如下，包含19张表：<br><img src="http://oqteqog7k.bkt.clouddn.com/data_model.jpg" alt=""></p>
<h1 id="2-传感器异常探测服务-SES"><a href="#2-传感器异常探测服务-SES" class="headerlink" title="2    传感器异常探测服务(SES)"></a>2    传感器异常探测服务(SES)</h1><p>   传感器异常探测服务是用于使用EML建模构建事件过滤模板，将过滤模型以EML编码形式注册到SES服务中，从而实现对特定数据流的监听，即异常事件的探测。<br>   传感器异常探测服务主要由EML和SES两个部分构成。</p>
<h2 id="2-1-事件建模语言EML"><a href="#2-1-事件建模语言EML" class="headerlink" title="2.1    事件建模语言EML"></a>2.1    事件建模语言EML</h2><p>事件建模语言是用于描述事件的OGC编码标准。主要包含四钟事件模式SimplePattern、ComplexPattern、TimerPattern、RepetitivePattern。</p>
<h3 id="2-1-1-SimplePattern模式"><a href="#2-1-1-SimplePattern模式" class="headerlink" title="2.1.1 SimplePattern模式"></a>2.1.1 SimplePattern模式</h3><p>SimplePattern是一种简单的事件监听模式，主要使用阈值选取数据集，作为下一步事件监听的输入数据集。<br>此处选取<code>urn:liesmars:object:feature:Platform:Station:Weather:sta-a001</code>传感器<code>urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed</code>观测属性值在20秒内大于8的所有观测数据，并统计观测数据个数，生成<code>prepare_event</code>数据集，为第二步提供数据输入。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;SimplePattern inputName=&quot;input&quot; patternID=&quot;prepare_stream&quot;&gt;</div><div class="line"> &lt;SelectFunctions&gt;</div><div class="line">	&lt;SelectFunction newEventName=&quot;prepare_event&quot;&gt;</div><div class="line">	   &lt;SelectCount&gt;&lt;/SelectCount&gt;</div><div class="line">	&lt;/SelectFunction&gt;</div><div class="line"> &lt;/SelectFunctions&gt;</div><div class="line">&lt;View&gt;</div><div class="line">  &lt;TimeView isBatch=&quot;false&quot;&gt;</div><div class="line">	&lt;Duration&gt;PT0H0M20S&lt;/Duration&gt;</div><div class="line">  &lt;/TimeView&gt;</div><div class="line">&lt;/View&gt;</div><div class="line"> &lt;Guard&gt;</div><div class="line">  &lt;fes:Filter xmlns:fes=&quot;http://www.opengis.net/fes/2.0&quot;&gt;</div><div class="line">	&lt;fes:PropertyIsGreaterThan&gt;</div><div class="line">	  &lt;fes:ValueReference&gt;input/doubleValue&lt;/fes:ValueReference&gt;</div><div class="line">	  &lt;fes:Literal&gt;</div><div class="line">	  &lt;swe:Quantity xmlns:swe=&quot;http://www.opengis.net/swe/1.0.1&quot;&gt;</div><div class="line">		  &lt;swe:value&gt;8&lt;/swe:value&gt;</div><div class="line">	  &lt;/swe:Quantity&gt;</div><div class="line">	  &lt;/fes:Literal&gt;</div><div class="line">	&lt;/fes:PropertyIsGreaterThan&gt;</div><div class="line">  &lt;/fes:Filter&gt;</div><div class="line">&lt;/Guard&gt;</div><div class="line">&lt;PropertyRestrictions&gt;</div><div class="line">  &lt;PropertyRestriction&gt;</div><div class="line">	&lt;name&gt;observedProperty&lt;/name&gt;</div><div class="line">	&lt;value&gt;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed&lt;/value&gt;</div><div class="line">  &lt;/PropertyRestriction&gt;</div><div class="line">  &lt;PropertyRestriction&gt;</div><div class="line">	&lt;name&gt;sensorID&lt;/name&gt;</div><div class="line">	&lt;value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/value&gt;</div><div class="line">  &lt;/PropertyRestriction&gt;</div><div class="line">&lt;/PropertyRestrictions&gt;</div><div class="line">&lt;/SimplePattern&gt;</div></pre></td></tr></table></figure></p>
<p>第二步获得第一步生成的prepare_event数据集合，即20秒内观测数据大于8的个数，如果个数大于2则生成prepareCom_event事件，即prepareCom_event数据集合。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;SimplePattern inputName=&quot;prepare_event&quot; patternID=&quot;prepare_result_stream&quot;&gt;</div><div class="line"> &lt;SelectFunctions&gt;</div><div class="line">	&lt;SelectFunction newEventName=&quot;prepareCom_event&quot;&gt;</div><div class="line">	 &lt;SelectEvent eventName=&quot;prepare_event&quot;/&gt;</div><div class="line">	&lt;/SelectFunction&gt;</div><div class="line"> &lt;/SelectFunctions&gt;</div><div class="line">  &lt;View&gt;</div><div class="line">  &lt;LengthView&gt;</div><div class="line">	&lt;EventCount&gt;1&lt;/EventCount&gt;</div><div class="line">  &lt;/LengthView&gt;</div><div class="line">&lt;/View&gt;</div><div class="line">&lt;Guard&gt;</div><div class="line">  &lt;fes:Filter xmlns:fes=&quot;http://www.opengis.net/fes/2.0&quot;&gt;</div><div class="line">	&lt;fes:PropertyIsGreaterThan&gt;</div><div class="line">	  &lt;fes:ValueReference&gt;prepare_event/doubleValue&lt;/fes:ValueReference&gt;</div><div class="line">	  &lt;fes:Literal&gt;2&lt;/fes:Literal&gt;</div><div class="line">	&lt;/fes:PropertyIsGreaterThan&gt;</div><div class="line">  &lt;/fes:Filter&gt;</div><div class="line">&lt;/Guard&gt;</div><div class="line">&lt;PropertyRestrictions&gt;&lt;/PropertyRestrictions&gt;</div><div class="line">&lt;/SimplePattern&gt;</div></pre></td></tr></table></figure></p>
<h3 id="2-1-2-ComplexPattern模式"><a href="#2-1-2-ComplexPattern模式" class="headerlink" title="2.1.2 ComplexPattern模式"></a>2.1.2 ComplexPattern模式</h3><p>Complex模式是可以使用定义好的两个事件发生的顺序，来确定事件是否发生，如事件发生的条件为事件A先发生后事件B发生则整个事件发生，如果输入数据流AAAA则这个事件无法发生，输入AABA事件发生。<br>此处定义diagnosis_prepare_compare_event事件发生的条件为diagnosis_prepare_stream流中的第一个事件先发生，之后prepare_result_stream流中的第二个事件（即prepareCom_event事件）发生。则这一事件触发后，会向用户订阅端口发送“event1:prepare”消息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;ComplexPattern patternID=&quot;diagnosis_prepare_compare_stream&quot;&gt;</div><div class="line">&lt;SelectFunctions&gt;</div><div class="line">  &lt;SelectFunction createCausality=&quot;true&quot; newEventName=&quot;diagnosis_prepare_compare_event&quot; outputName=&quot;prepareOut&quot;&gt;</div><div class="line">	&lt;NotifyOnSelect&gt;</div><div class="line">	  &lt;Message&gt;event1:prepare&lt;/Message&gt;</div><div class="line">	&lt;/NotifyOnSelect&gt;</div><div class="line">  &lt;/SelectFunction&gt;</div><div class="line">&lt;/SelectFunctions&gt;</div><div class="line">&lt;StructuralOperator&gt;</div><div class="line">  &lt;BEFORE/&gt;</div><div class="line">&lt;/StructuralOperator&gt;</div><div class="line">&lt;FirstPattern&gt;</div><div class="line">  &lt;PatternReference&gt;diagnosis_prepare_stream&lt;/PatternReference&gt;</div><div class="line">  &lt;SelectFunctionNumber&gt;0&lt;/SelectFunctionNumber&gt;</div><div class="line">&lt;/FirstPattern&gt;</div><div class="line">&lt;SecondPattern&gt;</div><div class="line">  &lt;PatternReference&gt;prepare_result_stream&lt;/PatternReference&gt;</div><div class="line">  &lt;SelectFunctionNumber&gt;0&lt;/SelectFunctionNumber&gt;</div><div class="line">&lt;/SecondPattern&gt;</div><div class="line">&lt;/ComplexPattern&gt;</div></pre></td></tr></table></figure></p>
<h3 id="2-1-3-TimerPattern模式和RepetitivePattern模式"><a href="#2-1-3-TimerPattern模式和RepetitivePattern模式" class="headerlink" title="2.1.3 TimerPattern模式和RepetitivePattern模式"></a>2.1.3 TimerPattern模式和RepetitivePattern模式</h3><p>TimerPattern模式是一种定时模式，如每隔10秒发送一条消息给用户。<br>RepetitivePattern模式一种重复模式，如当一个事件重复10次，事件发生。<br>这两个部分具体实现参考EML标准，本文不做赘述。</p>
<h2 id="2-2-事件异常探测服务SES"><a href="#2-2-事件异常探测服务SES" class="headerlink" title="2.2    事件异常探测服务SES"></a>2.2    事件异常探测服务SES</h2><p>异常探测服务通过用户订阅上述的事件模型，过滤对应的数据流，进行事件探测。其中数据流使用O&amp;M编码作为输入，事件过滤模型使用EML建模（其过滤支持三级过滤，本处只讲第三级过滤，因为这一过滤可以覆盖1和2级过滤需求），用户消息发布使用WNS网络通知服务。</p>
<h3 id="2-2-1-SES服务请求编码"><a href="#2-2-1-SES服务请求编码" class="headerlink" title="2.2.1    SES服务请求编码"></a>2.2.1    SES服务请求编码</h3><p>SES和SOS类似，支持的操作有GetCapabilities、Subscribe、RegisterPublisher、Notify。<br>GetCapacities主要是用于获取SES服务支持的内容。<br>RegisterPublisher用于向SES注册传感器模型，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot;</div><div class="line">xmlns:sml=&quot;http://www.opengis.net/sensorML/1.0.1&quot; xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;</div><div class="line">xmlns:wsn-b=&quot;http://docs.oasis-open.org/wsn/b-2&quot; xmlns:wsn-br=&quot;http://docs.oasis-open.org/wsn/br-2&quot;</div><div class="line">xmlns:wsn-t=&quot;http://docs.oasis-open.org/wsn/t-1&quot; xmlns:wsntw=&quot;http://docs.oasis-open.org/wsn/bw-2&quot;</div><div class="line">xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</div><div class="line">    &lt;SOAP-ENV:Header&gt;</div><div class="line">        &lt;wsa:Action&gt;http://docs.oasis-open.org/wsn/brw-2/RegisterPublisher/RegisterPublisherRequest&lt;/wsa:Action&gt;</div><div class="line">        &lt;wsa:To&gt;http://localhost:8080/52n-ses-1.2.2/services/Broker&lt;/wsa:To&gt;</div><div class="line">        &lt;wsa:From&gt;</div><div class="line">            &lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/role/anonymous&lt;/wsa:Address&gt;</div><div class="line">        &lt;/wsa:From&gt;</div><div class="line">        &lt;wsa:MessageID&gt;1410b537-aeea-43b6-a0fd-eeb97d2ff829&lt;/wsa:MessageID&gt;</div><div class="line">    &lt;/SOAP-ENV:Header&gt;</div><div class="line">    &lt;SOAP-ENV:Body&gt;</div><div class="line">        &lt;wsn-br:RegisterPublisher&gt;</div><div class="line">            &lt;wsn-br:Topic Dialect=&quot;http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple&quot;&gt;tses:SensorManagement/tses:Registered&lt;/wsn-br:Topic&gt;</div><div class="line">            &lt;wsn-br:Demand&gt;false&lt;/wsn-br:Demand&gt;</div><div class="line">            &lt;sml:SensorML version=&quot;1.0.1&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot; xmlns:swe=&quot;http://www.opengis.net/swe/1.0.1&quot;&gt;</div><div class="line">			&lt;sml:member&gt;</div><div class="line">				&lt;sml:System xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</div><div class="line">				</div><div class="line">					&lt;sml:identification&gt;</div><div class="line">						&lt;sml:IdentifierList&gt;</div><div class="line">							&lt;sml:identifier&gt;</div><div class="line">								&lt;sml:Term definition=&quot;urn:ogc:def:identifier:OGC:uniqueID&quot;&gt;</div><div class="line">									&lt;sml:value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/sml:value&gt;</div><div class="line">								&lt;/sml:Term&gt;</div><div class="line">							&lt;/sml:identifier&gt;</div><div class="line">						&lt;/sml:IdentifierList&gt;</div><div class="line">					&lt;/sml:identification&gt;</div><div class="line">					</div><div class="line">					&lt;sml:outputs&gt;</div><div class="line">						&lt;sml:OutputList&gt;	</div><div class="line">							&lt;sml:output name=&quot;AirTemperature&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Temperature&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验室(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;Cel&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;</div><div class="line">							&lt;sml:output name=&quot;WindSpeed&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验室(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;m/s&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;					</div><div class="line">							&lt;sml:output name=&quot;WindDirection&quot;&gt;</div><div class="line">								&lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Direction&quot;&gt;</div><div class="line">									&lt;gml:metaDataProperty&gt;</div><div class="line">										&lt;offering&gt;</div><div class="line">											&lt;id&gt;LIESMARS&lt;/id&gt;</div><div class="line">											&lt;name&gt;测绘遥感信息工程国家重点实验室(武汉大学)&lt;/name&gt;</div><div class="line">										&lt;/offering&gt;</div><div class="line">									&lt;/gml:metaDataProperty&gt;</div><div class="line">									&lt;swe:uom code=&quot;m&quot;/&gt;</div><div class="line">								&lt;/swe:Quantity&gt;</div><div class="line">							&lt;/sml:output&gt;</div><div class="line">						&lt;/sml:OutputList&gt;</div><div class="line">						</div><div class="line">					&lt;/sml:outputs&gt;</div><div class="line">				&lt;/sml:System&gt;</div><div class="line">			&lt;/sml:member&gt;</div><div class="line">		&lt;/sml:SensorML&gt;</div><div class="line"></div><div class="line">        &lt;/wsn-br:RegisterPublisher&gt;</div><div class="line">    &lt;/SOAP-ENV:Body&gt;</div><div class="line">&lt;/SOAP-ENV:Envelope&gt;</div></pre></td></tr></table></figure></p>
<p>原则上只有注册过传感器才能输入观测数据流。</p>
<p>Subscribe则是用于注册订阅模式（事件模型），如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">&lt;SOAP-ENV:Envelope xmlns:ses=&quot;http://www.opengis.net/ses/0.0&quot; xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:essf=&quot;http://www.opengis.net/es-sf/0.0&quot; xmlns:wsn-b=&quot;http://docs.oasis-open.org/wsn/b-2&quot; xmlns:wsn-br=&quot;http://docs.oasis-open.org/wsn/br-2&quot;  xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:SOAP-ENV=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</div><div class="line">  &lt;SOAP-ENV:Header&gt;</div><div class="line">    &lt;wsa:Action&gt;http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest&lt;/wsa:Action&gt;</div><div class="line">    &lt;wsa:To&gt;http://localhost:8080/52n-ses-1.2.2/services/Broker&lt;/wsa:To&gt;</div><div class="line">    &lt;wsa:From&gt;</div><div class="line">      &lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/role/anonymous&lt;/wsa:Address&gt;</div><div class="line">    &lt;/wsa:From&gt;</div><div class="line">    &lt;wsa:MessageID&gt;67424983-3e09-435e-863f-f6dea68802af&lt;/wsa:MessageID&gt;</div><div class="line">  &lt;/SOAP-ENV:Header&gt;</div><div class="line">  &lt;SOAP-ENV:Body&gt;</div><div class="line">    &lt;wsn-b:Subscribe&gt;</div><div class="line">      &lt;wsn-b:ConsumerReference&gt;</div><div class="line">        &lt;wsa:Address&gt;http://localhost:8092&lt;/wsa:Address&gt;</div><div class="line">      &lt;/wsn-b:ConsumerReference&gt;</div><div class="line">      &lt;wsn-b:Filter&gt;</div><div class="line">        &lt;wsn-b:MessageContent Dialect=&quot;http://www.opengis.net/ses/filter/level3&quot;&gt;</div><div class="line">          &lt;EML xsi:schemaLocation=&quot;http://www.opengis.net/eml/0.0.1 3111_XSDeml0.0.1OGC-EML-0_0_1-eml.xsd&quot; xmlns=&quot;http://www.opengis.net/eml/0.0.1&quot;&gt;</div><div class="line">            &lt;SimplePatterns&gt;</div><div class="line">                &lt;SimplePattern inputName=&quot;input1&quot; patternID=&quot;WinSpeedID&quot;&gt;</div><div class="line">                &lt;SelectFunctions&gt;</div><div class="line">                  &lt;SelectFunction createCausality=&quot;false&quot; newEventName=&quot;WinSpeedEvent&quot;&gt;</div><div class="line">                    &lt;SelectEvent eventName=&quot;input1&quot;/&gt;</div><div class="line">                  &lt;/SelectFunction&gt;</div><div class="line">                &lt;/SelectFunctions&gt;</div><div class="line">                &lt;View&gt;</div><div class="line">                  &lt;LengthView&gt;</div><div class="line">                    &lt;EventCount&gt;1&lt;/EventCount&gt;</div><div class="line">                  &lt;/LengthView&gt;</div><div class="line">                &lt;/View&gt;</div><div class="line">                &lt;PropertyRestrictions&gt;</div><div class="line">                  &lt;PropertyRestriction&gt;</div><div class="line">                    &lt;name&gt;observedProperty&lt;/name&gt;</div><div class="line">                    &lt;value&gt;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed&lt;/value&gt;</div><div class="line">                  &lt;/PropertyRestriction&gt;</div><div class="line">                  &lt;PropertyRestriction&gt;</div><div class="line">                    &lt;name&gt;sensorID&lt;/name&gt;</div><div class="line">                    &lt;value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/value&gt;</div><div class="line">                  &lt;/PropertyRestriction&gt;</div><div class="line">                &lt;/PropertyRestrictions&gt;</div><div class="line">              &lt;/SimplePattern&gt;</div><div class="line">              &lt;SimplePattern inputName=&quot;input2&quot; patternID=&quot;WindDirectionID&quot;&gt;</div><div class="line">                &lt;SelectFunctions&gt;</div><div class="line">                  &lt;SelectFunction createCausality=&quot;false&quot; newEventName=&quot;WindDirectionEvent&quot;&gt;</div><div class="line">                    &lt;SelectEvent eventName=&quot;input2&quot;/&gt;</div><div class="line">                  &lt;/SelectFunction&gt;</div><div class="line">                &lt;/SelectFunctions&gt;</div><div class="line">                &lt;View&gt;</div><div class="line">                  &lt;LengthView&gt;</div><div class="line">                    &lt;EventCount&gt;1&lt;/EventCount&gt;</div><div class="line">                  &lt;/LengthView&gt;</div><div class="line">                &lt;/View&gt;</div><div class="line">                &lt;PropertyRestrictions&gt;</div><div class="line">                  &lt;PropertyRestriction&gt;</div><div class="line">                    &lt;name&gt;observedProperty&lt;/name&gt;</div><div class="line">                    &lt;value&gt;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Direction&lt;/value&gt;</div><div class="line">                  &lt;/PropertyRestriction&gt;</div><div class="line">                  &lt;PropertyRestriction&gt;</div><div class="line">                    &lt;name&gt;sensorID&lt;/name&gt;</div><div class="line">                    &lt;value&gt;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&lt;/value&gt;</div><div class="line">                  &lt;/PropertyRestriction&gt;</div><div class="line">                &lt;/PropertyRestrictions&gt;</div><div class="line">              &lt;/SimplePattern&gt;</div><div class="line">            &lt;/SimplePatterns&gt;</div><div class="line">            &lt;ComplexPatterns/&gt;</div><div class="line">            &lt;TimerPatterns/&gt;</div><div class="line">            &lt;RepetitivePatterns/&gt;</div><div class="line">          &lt;/EML&gt;</div><div class="line">        &lt;/wsn-b:MessageContent&gt;</div><div class="line">      &lt;/wsn-b:Filter&gt;</div><div class="line">    &lt;/wsn-b:Subscribe&gt;</div><div class="line">  &lt;/SOAP-ENV:Body&gt;</div><div class="line">&lt;/SOAP-ENV:Envelope&gt;</div></pre></td></tr></table></figure></p>
<p>其实现主要采用SES标准中包含EML的方式，同时在监测到数据后向<a href="http://localhost:8092端口发布消息。" target="_blank" rel="external">http://localhost:8092端口发布消息。</a></p>
<p>Notify操作，将数据流注册到SES中，为其提供数据源，如：（其中有一点需要注意的是，52North发布的SES版本在数据过滤时，要求观测变量单位如：<code>&lt;swe:uom code=&quot;m/s&quot; /&gt;</code>必须是国际单位，否则会报错！）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</div><div class="line">&lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:wsnt=&quot;http://docs.oasis-open.org/wsn/b-2&quot;&gt;</div><div class="line">    &lt;soap:Header&gt;</div><div class="line">        &lt;wsa:To&gt;http://localhost:8080/52n-ses-1.2.2/services/Broker&lt;/wsa:To&gt;</div><div class="line">        &lt;wsa:Action&gt;http://docs.oasis-open.org/wsn/bw-2/NotificationConsumer/Notify&lt;/wsa:Action&gt;</div><div class="line">        &lt;wsa:MessageID&gt;uuid:1b4d3025-f80a-a5b6-aa37-864c47fa1a7e&lt;/wsa:MessageID&gt;</div><div class="line">        &lt;wsa:From&gt;</div><div class="line">            &lt;wsa:Address&gt;http://www.w3.org/2005/08/addressing/role/anonymous&lt;/wsa:Address&gt;</div><div class="line">        &lt;/wsa:From&gt;</div><div class="line">    &lt;/soap:Header&gt;</div><div class="line">    &lt;soap:Body&gt;</div><div class="line">        &lt;wsnt:Notify&gt;</div><div class="line">            &lt;wsnt:NotificationMessage&gt;</div><div class="line">                &lt;wsnt:Topic Dialect=&quot;http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple&quot;&gt;Measurements&lt;/wsnt:Topic&gt;</div><div class="line">                &lt;wsnt:Message&gt;</div><div class="line">                    &lt;om:Observation gml:id=&quot;ot_279501-4&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot; xmlns:om=&quot;http://www.opengis.net/om/1.0&quot; xmlns:sa=&quot;http://www.opengis.net/sampling/1.0&quot; xmlns:swe=&quot;http://www.opengis.net/swe/1.0.1&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;&gt;</div><div class="line">                        &lt;om:samplingTime&gt;</div><div class="line">                            &lt;gml:TimeInstant&gt;</div><div class="line">                                &lt;gml:timePosition&gt;2011-01-01T00:00:00.000+08:00&lt;/gml:timePosition&gt;</div><div class="line">                            &lt;/gml:TimeInstant&gt;</div><div class="line">                        &lt;/om:samplingTime&gt;</div><div class="line">                        &lt;om:procedure xlink:href=&quot;urn:liesmars:object:feature:Platform:Station:Weather:sta-a001&quot; /&gt;</div><div class="line">                        &lt;om:observedProperty&gt;</div><div class="line">                            &lt;swe:CompositePhenomenon gml:id=&quot;cpid0&quot; dimension=&quot;1&quot;&gt;</div><div class="line">                                &lt;gml:name&gt;resultComponents&lt;/gml:name&gt;</div><div class="line">                                &lt;swe:component xlink:href=&quot;http://www.opengis.net/def/uom/ISO-8601/0/Gregorian&quot; /&gt;</div><div class="line">                                &lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Temperature&quot; /&gt;</div><div class="line">                                &lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed&quot; /&gt;</div><div class="line">                                &lt;swe:component xlink:href=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Direction&quot; /&gt;&lt;/swe:CompositePhenomenon&gt;</div><div class="line">                        &lt;/om:observedProperty&gt;</div><div class="line">                        &lt;om:featureOfInterest&gt;</div><div class="line">                            &lt;sa:SamplingPoint gml:id=&quot;sta-a001&quot;&gt;</div><div class="line">                                &lt;gml:name&gt;station a001&lt;/gml:name&gt;</div><div class="line">                                &lt;sa:sampledFeature xlink:href=&quot;&quot; /&gt;</div><div class="line">                                &lt;sa:position&gt;</div><div class="line">                                    &lt;gml:Point srsName=&quot;urn:ogc:def:crs:EPSG::4326&quot;&gt;</div><div class="line">                                        &lt;gml:pos&gt;30.535296 114.369321&lt;/gml:pos&gt;</div><div class="line">                                    &lt;/gml:Point&gt;</div><div class="line">                                &lt;/sa:position&gt;</div><div class="line">                            &lt;/sa:SamplingPoint&gt;</div><div class="line">                        &lt;/om:featureOfInterest&gt;</div><div class="line">                        &lt;om:result&gt;</div><div class="line">                            &lt;swe:DataArray&gt;</div><div class="line">                                &lt;swe:elementCount&gt;</div><div class="line">                                    &lt;swe:Count&gt;</div><div class="line">                                        &lt;swe:value&gt;1&lt;/swe:value&gt;</div><div class="line">                                    &lt;/swe:Count&gt;</div><div class="line">                                &lt;/swe:elementCount&gt;</div><div class="line">                                &lt;swe:elementType name=&quot;Components&quot;&gt;</div><div class="line">                                    &lt;swe:DataRecord&gt;</div><div class="line">                                        &lt;swe:field name=&quot;Time&quot;&gt;</div><div class="line">                                            &lt;swe:Time definition=&quot;http://www.opengis.net/def/uom/ISO-8601/0/Gregorian&quot; /&gt;&lt;/swe:field&gt;</div><div class="line">                                        &lt;swe:field name=&quot;AirTemperature&quot;&gt;</div><div class="line">                                            &lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Temperature&quot;&gt;</div><div class="line">                                                &lt;swe:uom code=&quot;Cel&quot; /&gt;&lt;/swe:Quantity&gt;</div><div class="line">                                        &lt;/swe:field&gt;</div><div class="line">                                        &lt;swe:field name=&quot;WindSpeed&quot;&gt;</div><div class="line">                                            &lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Speed&quot;&gt;</div><div class="line">                                                &lt;swe:uom code=&quot;m/s&quot; /&gt;&lt;/swe:Quantity&gt;</div><div class="line">                                        &lt;/swe:field&gt;</div><div class="line">                                        &lt;swe:field name=&quot;WindDirection&quot;&gt;</div><div class="line">                                            &lt;swe:Quantity definition=&quot;urn:liesmars:def:phenomenon:LIESMARS:1.0.0:Direction&quot;&gt;</div><div class="line">                                                &lt;swe:uom code=&quot;m&quot; /&gt;&lt;/swe:Quantity&gt;</div><div class="line">                                        &lt;/swe:field&gt;</div><div class="line">                                    &lt;/swe:DataRecord&gt;</div><div class="line">                                &lt;/swe:elementType&gt;</div><div class="line">                                &lt;swe:encoding&gt;</div><div class="line">                                    &lt;swe:TextBlock decimalSeparator=&quot;.&quot; tokenSeparator=&quot;,&quot; blockSeparator=&quot;;&quot; /&gt;&lt;/swe:encoding&gt;</div><div class="line">                                &lt;swe:values&gt;2011-01-01T00:00:00.000+08:00,-0.6,0.8,2;&lt;/swe:values&gt;</div><div class="line">                            &lt;/swe:DataArray&gt;</div><div class="line">                        &lt;/om:result&gt;</div><div class="line">                    &lt;/om:Observation&gt;</div><div class="line">                &lt;/wsnt:Message&gt;</div><div class="line">            &lt;/wsnt:NotificationMessage&gt;</div><div class="line">        &lt;/wsnt:Notify&gt;</div><div class="line">    &lt;/soap:Body&gt;</div><div class="line">&lt;/soap:Envelope&gt;</div></pre></td></tr></table></figure></p>
<h3 id="2-2-2-SES服务实现原理"><a href="#2-2-2-SES服务实现原理" class="headerlink" title="2.2.2    SES服务实现原理"></a>2.2.2    SES服务实现原理</h3><p>谈到SES服务实现的原理不得不说到EPL语言和<a href="http://blog.csdn.net/luonanqin/article/details/21300263" target="_blank" rel="external">事件处理引擎Esper</a>。SES的实现原理是将EML事件建模语言翻译成EPL语言并创建对应的Listener，作为数据流的过滤条件监听类，之后将传入的数据流的O&amp;M编码解析，生成对应的类与数据对象，将这个数据对象经Esper事件引擎处理，从而实现数据的过滤。具体的EML转EPL如下图所示：<br><img src="http://oqteqog7k.bkt.clouddn.com/SES%E8%BD%AC%E6%8D%A2%E5%9B%BE.jpg" alt=""></p>
<p>其次，附上SES的源码连接:<a href="https://github.com/52North/SES" target="_blank" rel="external">https://github.com/52North/SES</a></p>
<h1 id="3-传感器观测服务与传感器异常探测的自动整合"><a href="#3-传感器观测服务与传感器异常探测的自动整合" class="headerlink" title="3    传感器观测服务与传感器异常探测的自动整合"></a>3    传感器观测服务与传感器异常探测的自动整合</h1><p>SOS作为数据源为SES提供数据支持，SES进行数据过滤，而SES仅支持流式数据过滤，所以需要在SES中间加入Feeder这个服务作为桥梁。<br>大致思路如图：<br><img src="http://oqteqog7k.bkt.clouddn.com/%E6%95%B4%E4%B8%AA%E5%8E%9F%E7%90%86.png" alt=""><br>而Feeder的原理图如下：<br><img src="http://oqteqog7k.bkt.clouddn.com/SOS-SES-Feeder%E5%8E%9F%E7%90%86%E5%9B%BE.png" alt=""><br>其中Feeder源码地址为：<a href="https://github.com/52North/sos-ses-feeder" target="_blank" rel="external">https://github.com/52North/sos-ses-feeder</a><br>该源码无法运行，其中存在几个微小错误，具体可以参考本人调试源码后总结的问题，解决连接如下：<a href="https://github.com/52North/sos-ses-feeder/issues/1" target="_blank" rel="external">https://github.com/52North/sos-ses-feeder/issues/1</a></p>
<p>最后，您能看完真的是很厉害，SWE框架自我感觉很庞大，冗余性问题明显，觉得日后需要很大改进。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/31/http请求之URL乱码问题/" rel="prev" title="http请求之URL乱码问题">
                http请求之URL乱码问题 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Yuan Sai" />
          <p class="site-author-name" itemprop="name">Yuan Sai</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#OGC-SWE全称-Sensor-Web-Enablement-是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。"><span class="nav-number">1.</span> <span class="nav-text">OGC SWE全称 Sensor Web Enablement,是OGC提出的传感器建模与服务标准，分为建模标准与服务标准两部分。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理"><span class="nav-number">2.</span> <span class="nav-text">由于本人对SOS与SES两种服务研究较多，本文主要讲述这两种传感器工作原理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-传感器观测数据接入服务-SOS"><span class="nav-number"></span> <span class="nav-text">1    传感器观测数据接入服务(SOS)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-传感器建模"><span class="nav-number">1.</span> <span class="nav-text">1.1        传感器建模</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-传感器观测数据建模"><span class="nav-number">2.</span> <span class="nav-text">1.2        传感器观测数据建模</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-传感器观测服务"><span class="nav-number">3.</span> <span class="nav-text">1.3        传感器观测服务</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-传感器异常探测服务-SES"><span class="nav-number"></span> <span class="nav-text">2    传感器异常探测服务(SES)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-事件建模语言EML"><span class="nav-number">1.</span> <span class="nav-text">2.1    事件建模语言EML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-SimplePattern模式"><span class="nav-number">1.1.</span> <span class="nav-text">2.1.1 SimplePattern模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-ComplexPattern模式"><span class="nav-number">1.2.</span> <span class="nav-text">2.1.2 ComplexPattern模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-TimerPattern模式和RepetitivePattern模式"><span class="nav-number">1.3.</span> <span class="nav-text">2.1.3 TimerPattern模式和RepetitivePattern模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-事件异常探测服务SES"><span class="nav-number">2.</span> <span class="nav-text">2.2    事件异常探测服务SES</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-SES服务请求编码"><span class="nav-number">2.1.</span> <span class="nav-text">2.2.1    SES服务请求编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-SES服务实现原理"><span class="nav-number">2.2.</span> <span class="nav-text">2.2.2    SES服务实现原理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-传感器观测服务与传感器异常探测的自动整合"><span class="nav-number"></span> <span class="nav-text">3    传感器观测服务与传感器异常探测的自动整合</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuan Sai</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
